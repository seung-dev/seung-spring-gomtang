<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="sql.dataSourceI.SEtfQ">

<parameterMap id="parameterMap" type="seung.java.kimchi.util.SLinkedHashMap"></parameterMap>
<resultMap    id="resultMap" type="seung.java.kimchi.util.SLinkedHashMap"></resultMap>

<select id="etf0000_SL" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	t_api_schm
WHERE 1 = 1
]]>
	<if test="api_set != null and api_set != ''"><![CDATA[
	AND api_set = #{api_set}
	]]></if>
	<if test="api_code != null and api_code != ''"><![CDATA[
	AND api_code = #{api_code}
	]]></if>
</select>

<select id="etf0001_SL" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	t_api_optn
WHERE 1 = 1
]]>
	<if test="optn_set != null and optn_set != ''"><![CDATA[
	AND optn_set = #{optn_set}
	]]></if>
</select>

<select id="etf0101_SL" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	f_etf_etf0101_SL(#{req_json})
]]>
</select>

<select id="etf0102_SR" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	v_etf_etf0102
]]>
</select>

<select id="etf0103_SL" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	v_etf_etf0103
]]>
</select>

<select id="etf0111_SR" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	f_etf_etf0111_SR(#{req_json})
]]>
</select>

<select id="etf0111_SL" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	f_etf_etf0111_SL(#{req_json})
]]>
</select>

<select id="etf0112_SR" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	v_etf_etf0112
WHERE 1 = 1
	AND item_code = #{item_code}
]]>
</select>

<select id="etf0113_SL" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	v_etf_etf0113
WHERE 1 = 1
	AND item_code = #{item_code}
]]>
</select>

<select id="etf9001_A" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	*
FROM
	v_table_schema
WHERE 1 = 1
	AND table_name IN ('t_etf_trdd', 't_etf_tr40005')
]]>
</select>

<select id="etf9001_B" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	DISTINCT
	item_code
FROM
	t_etf_trdd tet
	, t_etf_tr40005 tr40005
WHERE 1 = 1
	AND tet.trdd = tr40005.trdd
	AND tet.trdd LIKE CONCAT(#{year}, '%')
]]>
</select>

<select id="etf9001_C" parameterMap="parameterMap" resultMap="resultMap">
<![CDATA[
SELECT
	tr40005.item_code
	, tr40005.trdd
	, tet.trdd_no::varchar
	, tr40005.etf_cp::varchar
	, tr40005.etf_inc::varchar
	, tr40005.etf_pcp::varchar
	, tr40005.etf_vol::varchar
	, tr40005.etf_nav::varchar
	, tr40005.etf_volaccu::varchar
	, tr40005.etf_indexd::varchar
	, tr40005.etf_etfd::varchar
	, tr40005.etf_ter::varchar
	, tr40005.etf_ti::varchar
	, tr40005.etf_tiinc::varchar
FROM
	t_etf_trdd tet
	, t_etf_tr40005 tr40005
WHERE 1 = 1
	AND tet.trdd = tr40005.trdd
	AND tet.trdd LIKE CONCAT(#{year}, '%')
	AND tr40005.item_code = #{item_code}
]]>
</select>

</mapper>
